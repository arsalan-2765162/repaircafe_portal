{% extends 'RepairCafe/base.html' %}
{% load staticfiles %}
{% block content %}
<div class = "repairbg">
    <h1>Current Repair</h1>
    <div class="row">
        <div class="numberbg">
            <h3>Repair Number</h3>
            <h1>#{{ ticket.repairNumber }}</h1>
        </div>
        <div class="rightBlock">
            <div class ="namebg">
                <h2>Repair Item</h2>
                <h1>{{ ticket.itemName }}</h1>
            </div>
            <div class="namebg">
                <h2>Item Category</h2>
                <h1>{{ ticket.get_itemCategory_display }}</h1>
            </div>
        </div>
    </div>
    <div class="button-row">
        <button class="btn btn-incomplete">Mark as Incomplete</button>
        <button class="btn btn-complete" onclick="openCompleteModal(
            '{% url 'RepairCafe:complete_ticket' ticket.repairNumber %}', 
            '{{ ticket.itemName }}', 
            '{{ ticket.get_itemCategory_display }}', 
            '{{ ticket.repairNumber }}',
            '{{ ticket.itemDescription }}'
        )">Complete Repair</button>
    </div>
</div>
<!-- Modal -->
<div id="confirmationModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h1>Mark Repair as Complete?</h1>
        <p id ="modal-item-details"></p>
        <div class = "buttons">
            <button id="cancel-btn" class="btn btn-reject">Go Back</button>
            <form id="accept-form" action="" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-accept">Complete</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}